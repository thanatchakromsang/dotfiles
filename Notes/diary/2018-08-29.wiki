=29 Aug 2018 - *Dockerfile Optimization day*=

== Template ==
%% * [ ] <text> -- project:<name> +<tag>
project: personal, pronto, squadbeat, college

* -> # -> - -> 1)...

== WHAT I WANT TO DO TODAY | due:2018-08-29+22hour +diary ==
*
*
*

== WHAT ELSE I DID TODAY ==
*
*
*

== OTHER NOTES ==
* Build test case
  # Customer service
Old behavior is when something change in current folder we will install packages from requirement.txt
New behavior to purpose is run installl packages from requirements.txt only when something inside is change

* Build speed test for every files in dockerfile
  - Old behavior is when something inside 1 services change we have to redo step After that that include `RUN pip install -r requirements.txt`
    - run for the first time
      1) *docker build .  0.23s user 0.04s system 0% cpu 1:44.30 total*
    - run for the second time (something changed inside like a code change)
      1) *docker build .  0.22s user 0.04s system 0% cpu 1:39.89 total*
  - New behavior is when requirements or requirements.txt change it will do `RUN pip install -r requirements.txt` otherwise use a cache version of packages
    - run for the first time
      1) *docker build .  0.29s user 0.05s system 0% cpu 2:37.01 total*
    - run for the second time (something changed inside like a code change)
      1) *docker build .  0.34s user 0.06s system 2% cpu 18.233 total*
  # Test by change Instruction inside Dockerfile

  {{{Dockerfile
    FROM python:3.6

    ENV APPLICATION_ROOT /app/

    RUN mkdir $APPLICATION_ROOT
    COPY ./requirements.txt $APPLICATION_ROOT
    COPY ./requirements/ $APPLICATION_ROOT/requirements

    WORKDIR $APPLICATION_ROOT
    RUN pip install -r requirements.txt

    COPY . $APPLICATION_ROOT

    WORKDIR $APPLICATION_ROOT
    RUN chmod +x entrypoint.sh
    ENTRYPOINT ["./entrypoint.sh"]
  }}}
* PR
  - [X] gateway-service
  - [X] zendesk-service
  - [X] survey-service
  - [X] connectwise-service
  - [X] billing-service
  - [X] email-service
  - [X] customer-service
* [X] rebase billing  #3631d6eb
